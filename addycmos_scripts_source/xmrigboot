#!/sbin/openrc-run
name="AddyCMOS ${RC_SVCNAME}"
description="Addy CMOS xmrig start on boot"

XMRIG="/srv/xmrig-mo/xmrig"
XMRIG_OPTS="--config=/srv/xmrig-mo/conf.d/config.json"

depend()
{
        after *
}

start() {
    ebegin "Starting Miner"
    start-stop-daemon --wait 5000 --background --start --exec $XMRIG $XMRIG_CONFIG -- $XMRIG_OPTS
    eend $?
}

stop() {
    ebegin "Stopping Miner"
    start-stop-daemon --stop --exec $XMRIG --pidfile /var/run/${RC_SVCNAME}.pid
    eend $?
}
